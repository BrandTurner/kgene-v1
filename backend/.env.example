# ==============================================================================
# KEGG Explore Backend - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control (already in .gitignore)
# ==============================================================================

# ------------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# ------------------------------------------------------------------------------
# Format: postgresql+asyncpg://user:password@host:port/database
# Examples:
#   Local: postgresql+asyncpg://kegg_user:password@localhost:5432/kegg_explore
#   Docker: postgresql+asyncpg://kegg_user:password@postgres:5432/kegg_explore
#   AWS RDS: postgresql+asyncpg://user:pass@db.xxx.rds.amazonaws.com:5432/kegg
#   Heroku: Uses DATABASE_URL automatically
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/kgene

# Connection pool settings (tune based on load)
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10

# ------------------------------------------------------------------------------
# Redis Configuration (Cache & Job Queue)
# ------------------------------------------------------------------------------
# Format: redis://[:password@]host:port/db
# Examples:
#   Local: redis://localhost:6379/0
#   Docker: redis://redis:6379/0
#   AWS ElastiCache: redis://cache.xxx.cache.amazonaws.com:6379/0
#   Heroku: Uses REDIS_URL automatically
REDIS_URL=redis://localhost:6379/0

# Optional: Redis password
# REDIS_PASSWORD=your_redis_password

# ------------------------------------------------------------------------------
# API Server Configuration
# ------------------------------------------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000

# Number of uvicorn workers (Formula: 2 * CPU cores + 1)
# Development: 1
# Production: 4-8
API_WORKERS=1

# ------------------------------------------------------------------------------
# Environment
# ------------------------------------------------------------------------------
# Options: development | staging | production
ENVIRONMENT=development

# Debug mode (disable in production)
DEBUG=true

# ------------------------------------------------------------------------------
# Security - CRITICAL: Change these in production!
# ------------------------------------------------------------------------------
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE_THIS_IN_PRODUCTION_USE_A_STRONG_SECRET_KEY

# CORS (Cross-Origin Resource Sharing) Configuration
# Development: Allow all origins (*)
# Production: Specify exact domains (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Allow credentials in CORS requests
CORS_ALLOW_CREDENTIALS=true

# ------------------------------------------------------------------------------
# KEGG API Configuration
# ------------------------------------------------------------------------------
# KEGG REST API base URL (rarely needs changing)
KEGG_API_BASE_URL=https://rest.kegg.jp

# Rate limit: KEGG allows 3 requests per second (0.35 = ~3 req/sec)
KEGG_API_RATE_LIMIT=0.35

# HTTP timeout for KEGG API requests (seconds)
KEGG_TIMEOUT=30

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
# Log level: DEBUG | INFO | WARNING | ERROR | CRITICAL
# Development: DEBUG or INFO
# Production: INFO or WARNING
LOG_LEVEL=INFO

# Log format: json | text
# Production: json (for log aggregation tools)
# Development: text (human-readable)
LOG_FORMAT=text

# Log file path (optional, logs to stdout if not set)
# LOG_FILE=/var/log/kegg-explore/api.log

# ------------------------------------------------------------------------------
# Background Job Configuration (ARQ)
# ------------------------------------------------------------------------------
# Queue name for background jobs
ARQ_QUEUE_NAME=kgene:queue

# Maximum number of concurrent jobs
MAX_CONCURRENT_ORTHOLOGS=10

# Job timeout in seconds (1 hour default)
# E. coli gene processing takes ~15-20 minutes
ARQ_JOB_TIMEOUT=3600

# Worker poll interval in seconds
ARQ_POLL_DELAY=0.5

# ------------------------------------------------------------------------------
# Optional: Error Tracking (Sentry)
# ------------------------------------------------------------------------------
# Sign up at https://sentry.io for error tracking
# Leave empty to disable Sentry
SENTRY_DSN=

# Sentry environment name
SENTRY_ENVIRONMENT=development

# Sample rate for performance monitoring (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# ------------------------------------------------------------------------------
# Optional: API Rate Limiting
# ------------------------------------------------------------------------------
# Enable API rate limiting (per IP address)
ENABLE_RATE_LIMIT=false

# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=100

# ------------------------------------------------------------------------------
# Optional: Feature Flags
# ------------------------------------------------------------------------------
# Enable real-time progress updates via WebSocket
ENABLE_WEBSOCKET=false

# Enable API metrics endpoint /metrics
ENABLE_METRICS=true

# ------------------------------------------------------------------------------
# Development Only Settings
# ------------------------------------------------------------------------------
# Enable auto-reload on code changes (uvicorn --reload)
DEV_RELOAD=true

# Enable detailed SQL query logging (performance impact)
DEV_SQL_ECHO=false

# Enable interactive API docs (Swagger UI at /docs)
DEV_ENABLE_DOCS=true

# Application metadata
APP_NAME=KEGG Explore API
APP_VERSION=2.0.0
